"use client";
import { createClient } from "@/utils/supabase/client";
import { useState } from "react";

export default function GoogleLoginButton() {
  const [loading, setLoading] = useState(false);
  const supabase = createClient();
  const handleGoogleLogin = async () => {
    try {
      setLoading(true);
      const { error } = await supabase.auth.signInWithOAuth({
        provider: "google",
        options: {
          redirectTo: `${window.location.origin}/auth/callback`,
        },
      });

      if (error) throw error;
    } catch (error) {
      console.error("Error logging in with Google:", error);
      alert("Error logging in with Google");
    } finally {
      setLoading(false);
    }
  };

  return (
    <button
      onClick={handleGoogleLogin}
      disabled={loading}
      className="flex items-center justify-center w-full px-4 py-2 space-x-2 text-sm font-medium text-gray-700 transition-colors bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
    >
      {loading ? (
        <span>Loading...</span>
      ) : (
        <>
          <svg className="w-5 h-5" viewBox="0 0 24 24">
            <path
              d="M12.24 10.285V14.4h6.806c-.275 1.765-2.056 5.174-6.806 5.174-4.095 0-7.439-3.389-7.439-7.574s3.345-7.574 7.439-7.574c2.33 0 3.891.989 4.785 1.849l3.254-3.138C18.189 1.186 15.479 0 12.24 0c-6.635 0-12 5.365-12 12s5.365 12 12 12c6.926 0 11.52-4.869 11.52-11.726 0-.788-.085-1.39-.189-1.989H12.24z"
              fill="#4285F4"
            />
            <path
              d="M12.24 10.285V14.4h6.806c-.275 1.765-2.056 5.174-6.806 5.174-4.095 0-7.439-3.389-7.439-7.574s3.345-7.574 7.439-7.574c2.33 0 3.891.989 4.785 1.849l3.254-3.138C18.189 1.186 15.479 0 12.24 0c-6.635 0-12 5.365-12 12s5.365 12 12 12c6.926 0 11.52-4.869 11.52-11.726 0-.788-.085-1.39-.189-1.989H12.24z"
              fill="#4285F4"
            />
            <path
              d="M0 12c0-6.635 5.365-12 12-12 3.24 0 5.95 1.186 8.04 3.139l-3.254 3.138C15.89 5.277 14.33 4.287 12 4.287c-4.095 0-7.44 3.389-7.44 7.574s3.345 7.574 7.44 7.574c4.75 0 6.531-3.409 6.806-5.174H12V10.285h11.52c.104.599.189 1.201.189 1.989C23.709 19.131 19.115 24 12.19 24 5.555 24 .19 18.635.19 12"
              fill="#34A853"
            />
            <path
              d="M0 12c0-6.635 5.365-12 12-12 3.24 0 5.95 1.186 8.04 3.139l-3.254 3.138C15.89 5.277 14.33 4.287 12 4.287c-4.095 0-7.44 3.389-7.44 7.574s3.345 7.574 7.44 7.574c4.75 0 6.531-3.409 6.806-5.174H12V10.285h11.52c.104.599.189 1.201.189 1.989C23.709 19.131 19.115 24 12.19 24 5.555 24 .19 18.635.19 12"
              fill="#34A853"
            />
            <path
              d="M12 16.8c-4.095 0-7.44-3.389-7.44-7.574S7.906 1.652 12 1.652c2.33 0 3.891.989 4.785 1.849l3.254-3.138C18.189 1.186 15.479 0 12.24 0c-6.635 0-12 5.365-12 12s5.365 12 12 12c6.926 0 11.52-4.869 11.52-11.726 0-.788-.085-1.39-.189-1.989H12V10.285h6.24V14.4c-.275 1.765-2.056 5.174-6.806 5.174"
              fill="#FBBC05"
            />
            <path
              d="M12 16.8c-4.095 0-7.44-3.389-7.44-7.574S7.906 1.652 12 1.652c2.33 0 3.891.989 4.785 1.849l3.254-3.138C18.189 1.186 15.479 0 12.24 0c-6.635 0-12 5.365-12 12s5.365 12 12 12c6.926 0 11.52-4.869 11.52-11.726 0-.788-.085-1.39-.189-1.989H12V10.285h6.24V14.4c-.275 1.765-2.056 5.174-6.806 5.174"
              fill="#FBBC05"
            />
            <path
              d="M12 6.6v3.685h5.723c-.238-1.349-1.307-3.685-5.723-3.685-3.418 0-6.203 2.826-6.203 6.316S8.582 19.23 12 19.23c2.892 0 4.923-1.58 5.433-2.919H12V13.01h9.316c.116.647.18 1.349.18 2.205 0 5.648-3.786 9.674-9.496 9.674-5.612 0-10.15-4.55-10.15-10.15S6.388 4.6 12 4.6c2.786 0 4.752 1.213 5.787 2.21"
              fill="#EA4335"
            />
            <path
              d="M12 6.6v3.685h5.723c-.238-1.349-1.307-3.685-5.723-3.685-3.418 0-6.203 2.826-6.203 6.316S8.582 19.23 12 19.23c2.892 0 4.923-1.58 5.433-2.919H12V13.01h9.316c.116.647.18 1.349.18 2.205 0 5.648-3.786 9.674-9.496 9.674-5.612 0-10.15-4.55-10.15-10.15S6.388 4.6 12 4.6c2.786 0 4.752 1.213 5.787 2.21"
              fill="#EA4335"
            />
          </svg>
          <span>Sign in with Google</span>
        </>
      )}
    </button>
  );
}
